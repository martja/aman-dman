$schema: "https://json-schema.org/draft/2020-12/schema"
title: "Timelines Config"
description: "Schema for arrival/departure timelines and ATC connection settings"
type: object
properties:
  timelines:
    type: object
    description: "Map of airport ICAO code to list of timelines"
    patternProperties:
      "^[A-Z]{4}$":
        type: array
        items:
          type: object
          required: ["title", "right"]
          properties:
            title:
              type: string
              description: "Timeline title"
            left:
              oneOf:
                - $ref: "#/$defs/side"
                - type: "null"
              description: "Defines the left side of the timeline. Set to null for single-sided timelines."
            right:
              $ref: "#/$defs/side"
              description: "Defines the right side of the timeline."
          additionalProperties: false
    additionalProperties: false

  connectionConfig:
    type: object
    required: ["atcClient", "api"]
    properties:
      atcClient:
        type: object
        required: ["host", "port"]
        properties:
          host:
            type: string
          port:
            type: integer
            minimum: 1
            maximum: 65535
        additionalProperties: false
      api:
        type: object
        required: ["host"]
        properties:
          host:
            type: string
            format: uri
        additionalProperties: false
    additionalProperties: false

required: ["timelines", "connectionConfig"]
additionalProperties: false

$defs:
  side:
    type: object
    required: ["runways"]
    properties:
      runways:
        type: array
        items:
          type: string
          pattern: "^[0-9]{2}[A-Z]?$"
          description: "Runway identifier (e.g., 01L, 19R)"
    additionalProperties: false